#include <AFMotor.h> 

AF_DCMotor motor1(1, MOTOR12_64KHZ);
AF_DCMotor motor2(2, MOTOR12_64KHZ);
AF_DCMotor motor3(3, MOTOR12_64KHZ);
AF_DCMotor motor4(4, MOTOR12_64KHZ);
String input = "";
int strength = 0;
int angle = 0;
int lastAngle = 0;
char readData[10]="0000000000";

void setup(){
    Serial.begin(9600);  //Set the baud rate to your Bluetooth module.
}

void loop(){
  if(Serial.available() > 0){
     Serial.readBytes(readData, 10);
     //Serial.println(readData);
     String data = String(readData);
     int indexOfS = data.indexOf('s');
     angle = data.substring(1, indexOfS).toInt();
     strength = data.substring(indexOfS+1, data.indexOf('!')).toInt();
   
     Serial.println("ANGLE: ");
     Serial.println(angle);
     Serial.println("STRENGTH: ");
     Serial.println(strength);
     setMotorStrength(strength*2.55);
     goForward();
  }
  
  Stop();
  
  
}

void setMotorStrength(int s){
  motor1.setSpeed(s);
  motor2.setSpeed(s);
  motor3.setSpeed(s);
  motor4.setSpeed(s);

}
void Stop(){
  motor1.run(RELEASE);
  motor2.run(RELEASE);
  motor3.run(RELEASE);
  motor4.run(RELEASE);
}

void goForward(){
  motor1.run(FORWARD);
  motor2.run(FORWARD);
  motor3.run(FORWARD);
  motor4.run(FORWARD);
}

void goLeft(){
  motor1.run(BACKWARD); //rotate the motor anti-clockwise
  motor2.run(BACKWARD); //rotate the motor anti-clockwise
  motor3.run(BACKWARD);  //rotate the motor clockwise
  motor4.run(FORWARD);  //rota  
}
void goRight(){
  motor1.run(FORWARD); //rotate the motor anti-clockwise
  motor2.run(FORWARD); //rotate the motor anti-clockwise
  motor3.run(FORWARD);  //rotate the motor clockwise
  motor4.run(BACKWARD);  //rota  
}
